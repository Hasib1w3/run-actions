name: Keep Spaces Alive (GET only)

on:
  schedule:
    - cron: "0 */12 * * *" # Every 12 hours
  workflow_dispatch:

jobs:
  ping_spaces:
    runs-on: ubuntu-latest
    steps:
      - name: Run Health Checks (GET /health)
        env:
          TOKEN_GFVBF_KLG1KS: ${{ secrets.HF_TOKEN_GFVBF_KLG1KS }}
          TOKEN_GFVBF_JOHXI5: ${{ secrets.HF_TOKEN_GFVBF_JOHXI5 }}
          TOKEN_GFVBF_7M07UX: ${{ secrets.HF_TOKEN_GFVBF_7M07UX }}
          TOKEN_GFVBF_A47JG2: ${{ secrets.HF_TOKEN_GFVBF_A47JG2 }}
          TOKEN_GFVBF_S04SYQ: ${{ secrets.HF_TOKEN_GFVBF_S04SYQ }}
          TOKEN_GNBG_PTH6R5: ${{ secrets.HF_TOKEN_GNBG_PTH6R5 }}
          TOKEN_GNBG_G3DWWK: ${{ secrets.HF_TOKEN_GNBG_G3DWWK }}
          TOKEN_GNBG_8EXUJY: ${{ secrets.HF_TOKEN_GNBG_8EXUJY }}
          TOKEN_GNBG_9M1WTH: ${{ secrets.HF_TOKEN_GNBG_9M1WTH }}
          TOKEN_GNBG_GVLMA4: ${{ secrets.HF_TOKEN_GNBG_GVLMA4 }}
          TOKEN_J6GEP5ZD_J63LY0: ${{ secrets.HF_TOKEN_J6GEP5ZD_J63LY0 }}
          TOKEN_J6GEP5ZD_UJSDVQ: ${{ secrets.HF_TOKEN_J6GEP5ZD_UJSDVQ }}
          TOKEN_J6GEP5ZD_RFVX8R: ${{ secrets.HF_TOKEN_J6GEP5ZD_RFVX8R }}
          TOKEN_J6GEP5ZD_71RL4V: ${{ secrets.HF_TOKEN_J6GEP5ZD_71RL4V }}
          TOKEN_J6GEP5ZD_W0NUIV: ${{ secrets.HF_TOKEN_J6GEP5ZD_W0NUIV }}
          TOKEN_MFLRJ8FO_8EG5G7: ${{ secrets.HF_TOKEN_MFLRJ8FO_8EG5G7 }}
          TOKEN_MFLRJ8FO_BAK683: ${{ secrets.HF_TOKEN_MFLRJ8FO_BAK683 }}
          TOKEN_MFLRJ8FO_A6989L: ${{ secrets.HF_TOKEN_MFLRJ8FO_A6989L }}
          TOKEN_MFLRJ8FO_6M0CVL: ${{ secrets.HF_TOKEN_MFLRJ8FO_6M0CVL }}
          TOKEN_MFLRJ8FO_TM0KO2: ${{ secrets.HF_TOKEN_MFLRJ8FO_TM0KO2 }}
          TOKEN_84Q1HGYE_4MY39E: ${{ secrets.HF_TOKEN_84Q1HGYE_4MY39E }}
          TOKEN_84Q1HGYE_XJVNHA: ${{ secrets.HF_TOKEN_84Q1HGYE_XJVNHA }}
          TOKEN_84Q1HGYE_0BTJ72: ${{ secrets.HF_TOKEN_84Q1HGYE_0BTJ72 }}
          TOKEN_84Q1HGYE_619ESP: ${{ secrets.HF_TOKEN_84Q1HGYE_619ESP }}
          TOKEN_84Q1HGYE_9KVHN1: ${{ secrets.HF_TOKEN_84Q1HGYE_9KVHN1 }}
          TOKEN_BWX2LINR_HV5WZO: ${{ secrets.HF_TOKEN_BWX2LINR_HV5WZO }}
          TOKEN_BWX2LINR_EIR7TU: ${{ secrets.HF_TOKEN_BWX2LINR_EIR7TU }}
          TOKEN_BWX2LINR_KCIQEQ: ${{ secrets.HF_TOKEN_BWX2LINR_KCIQEQ }}
          TOKEN_BWX2LINR_4NA7Q2: ${{ secrets.HF_TOKEN_BWX2LINR_4NA7Q2 }}
          TOKEN_BWX2LINR_VI9VZJ: ${{ secrets.HF_TOKEN_BWX2LINR_VI9VZJ }}
          TOKEN_36MWOJIK_BTJ16R: ${{ secrets.HF_TOKEN_36MWOJIK_BTJ16R }}
          TOKEN_36MWOJIK_D4DJMJ: ${{ secrets.HF_TOKEN_36MWOJIK_D4DJMJ }}
          TOKEN_36MWOJIK_Q5MDL7: ${{ secrets.HF_TOKEN_36MWOJIK_Q5MDL7 }}
          TOKEN_36MWOJIK_AG1JD0: ${{ secrets.HF_TOKEN_36MWOJIK_AG1JD0 }}
          TOKEN_36MWOJIK_JUA339: ${{ secrets.HF_TOKEN_36MWOJIK_JUA339 }}
          TOKEN_1CYZTRKJ_MLYRJF: ${{ secrets.HF_TOKEN_1CYZTRKJ_MLYRJF }}
          TOKEN_1CYZTRKJ_LN0FZ2: ${{ secrets.HF_TOKEN_1CYZTRKJ_LN0FZ2 }}
          TOKEN_1CYZTRKJ_BS9I35: ${{ secrets.HF_TOKEN_1CYZTRKJ_BS9I35 }}
          TOKEN_1CYZTRKJ_UEH8KG: ${{ secrets.HF_TOKEN_1CYZTRKJ_UEH8KG }}
          TOKEN_1CYZTRKJ_T5ALTU: ${{ secrets.HF_TOKEN_1CYZTRKJ_T5ALTU }}
          TOKEN_GPB77DWS_S6Z106: ${{ secrets.HF_TOKEN_GPB77DWS_S6Z106 }}
          TOKEN_GPB77DWS_49DABN: ${{ secrets.HF_TOKEN_GPB77DWS_49DABN }}
          TOKEN_GPB77DWS_YQK1SO: ${{ secrets.HF_TOKEN_GPB77DWS_YQK1SO }}
          TOKEN_GPB77DWS_KPCW0K: ${{ secrets.HF_TOKEN_GPB77DWS_KPCW0K }}
          TOKEN_GPB77DWS_FURSNJ: ${{ secrets.HF_TOKEN_GPB77DWS_FURSNJ }}
          TOKEN_RPFCG5XN_7U2UCB: ${{ secrets.HF_TOKEN_RPFCG5XN_7U2UCB }}
          TOKEN_RPFCG5XN_65CJO4: ${{ secrets.HF_TOKEN_RPFCG5XN_65CJO4 }}
          TOKEN_RPFCG5XN_SQZ268: ${{ secrets.HF_TOKEN_RPFCG5XN_SQZ268 }}
          TOKEN_RPFCG5XN_4DBFJ7: ${{ secrets.HF_TOKEN_RPFCG5XN_4DBFJ7 }}
          TOKEN_RPFCG5XN_X2SQWC: ${{ secrets.HF_TOKEN_RPFCG5XN_X2SQWC }}
          TOKEN_VD2EYQEV_W86Z7W: ${{ secrets.HF_TOKEN_VD2EYQEV_W86Z7W }}
          TOKEN_VD2EYQEV_THX93R: ${{ secrets.HF_TOKEN_VD2EYQEV_THX93R }}
          TOKEN_VD2EYQEV_1AM8OC: ${{ secrets.HF_TOKEN_VD2EYQEV_1AM8OC }}
          TOKEN_VD2EYQEV_SYWXX3: ${{ secrets.HF_TOKEN_VD2EYQEV_SYWXX3 }}
          TOKEN_VD2EYQEV_ZKHXVY: ${{ secrets.HF_TOKEN_VD2EYQEV_ZKHXVY }}
          TOKEN_HASIBXX2X_JM0FB1: ${{ secrets.HF_TOKEN_HASIBXX2X_JM0FB1 }}
          TOKEN_HASIBXX2X_V5E1I9: ${{ secrets.HF_TOKEN_HASIBXX2X_V5E1I9 }}
          TOKEN_HASIBXX2X_YV7W1Y: ${{ secrets.HF_TOKEN_HASIBXX2X_YV7W1Y }}
          TOKEN_HASIBXX2X_8I1VO3: ${{ secrets.HF_TOKEN_HASIBXX2X_8I1VO3 }}
          TOKEN_HASIBXX2X_PT9W8T: ${{ secrets.HF_TOKEN_HASIBXX2X_PT9W8T }}
          TOKEN_BDFBEFBH_DSMWW0: ${{ secrets.HF_TOKEN_BDFBEFBH_DSMWW0 }}
          TOKEN_BDFBEFBH_QEF4SS: ${{ secrets.HF_TOKEN_BDFBEFBH_QEF4SS }}
          TOKEN_BDFBEFBH_TYY34V: ${{ secrets.HF_TOKEN_BDFBEFBH_TYY34V }}
          TOKEN_BDFBEFBH_LARTE2: ${{ secrets.HF_TOKEN_BDFBEFBH_LARTE2 }}
          TOKEN_BDFBEFBH_KOBYDY: ${{ secrets.HF_TOKEN_BDFBEFBH_KOBYDY }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_RULIB7: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_RULIB7 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_P5J503: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_P5J503 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_5ZUY97: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_5ZUY97 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_CE2TFC: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_CE2TFC }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_B72RG9: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_B72RG9 }}
          TOKEN_HTYJY6_TASTQ2: ${{ secrets.HF_TOKEN_HTYJY6_TASTQ2 }}
          TOKEN_HTYJY6_O06039: ${{ secrets.HF_TOKEN_HTYJY6_O06039 }}
          TOKEN_HTYJY6_UH782V: ${{ secrets.HF_TOKEN_HTYJY6_UH782V }}
          TOKEN_HTYJY6_RECT4Z: ${{ secrets.HF_TOKEN_HTYJY6_RECT4Z }}
          TOKEN_HTYJY6_SA0VE5: ${{ secrets.HF_TOKEN_HTYJY6_SA0VE5 }}

          # URL List for GET Checks
          URLS: >
            https://gfvbf-klg1ks.hf.space/health|TOKEN_GFVBF_KLG1KS
            https://gfvbf-johxi5.hf.space/health|TOKEN_GFVBF_JOHXI5
            https://gfvbf-7m07ux.hf.space/health|TOKEN_GFVBF_7M07UX
            https://gfvbf-a47jg2.hf.space/health|TOKEN_GFVBF_A47JG2
            https://gfvbf-s04syq.hf.space/health|TOKEN_GFVBF_S04SYQ
            https://gnbg-pth6r5.hf.space/health|TOKEN_GNBG_PTH6R5
            https://gnbg-g3dwwk.hf.space/health|TOKEN_GNBG_G3DWWK
            https://gnbg-8exujy.hf.space/health|TOKEN_GNBG_8EXUJY
            https://gnbg-9m1wth.hf.space/health|TOKEN_GNBG_9M1WTH
            https://gnbg-gvlma4.hf.space/health|TOKEN_GNBG_GVLMA4
            https://j6gep5zd-j63ly0.hf.space/health|TOKEN_J6GEP5ZD_J63LY0
            https://j6gep5zd-ujsdvq.hf.space/health|TOKEN_J6GEP5ZD_UJSDVQ
            https://j6gep5zd-rfvx8r.hf.space/health|TOKEN_J6GEP5ZD_RFVX8R
            https://j6gep5zd-71rl4v.hf.space/health|TOKEN_J6GEP5ZD_71RL4V
            https://j6gep5zd-w0nuiv.hf.space/health|TOKEN_J6GEP5ZD_W0NUIV
            https://mflrj8fo-8eg5g7.hf.space/health|TOKEN_MFLRJ8FO_8EG5G7
            https://mflrj8fo-bak683.hf.space/health|TOKEN_MFLRJ8FO_BAK683
            https://mflrj8fo-a6989l.hf.space/health|TOKEN_MFLRJ8FO_A6989L
            https://mflrj8fo-6m0cvl.hf.space/health|TOKEN_MFLRJ8FO_6M0CVL
            https://mflrj8fo-tm0ko2.hf.space/health|TOKEN_MFLRJ8FO_TM0KO2
            https://84q1hgye-4my39e.hf.space/health|TOKEN_84Q1HGYE_4MY39E
            https://84q1hgye-xjvnha.hf.space/health|TOKEN_84Q1HGYE_XJVNHA
            https://84q1hgye-0btj72.hf.space/health|TOKEN_84Q1HGYE_0BTJ72
            https://84q1hgye-619esp.hf.space/health|TOKEN_84Q1HGYE_619ESP
            https://84q1hgye-9kvhn1.hf.space/health|TOKEN_84Q1HGYE_9KVHN1
            https://bwx2linr-hv5wzo.hf.space/health|TOKEN_BWX2LINR_HV5WZO
            https://bwx2linr-eir7tu.hf.space/health|TOKEN_BWX2LINR_EIR7TU
            https://bwx2linr-kciqeq.hf.space/health|TOKEN_BWX2LINR_KCIQEQ
            https://bwx2linr-4na7q2.hf.space/health|TOKEN_BWX2LINR_4NA7Q2
            https://bwx2linr-vi9vzj.hf.space/health|TOKEN_BWX2LINR_VI9VZJ
            https://36mwojik-btj16r.hf.space/health|TOKEN_36MWOJIK_BTJ16R
            https://36mwojik-d4djmj.hf.space/health|TOKEN_36MWOJIK_D4DJMJ
            https://36mwojik-q5mdl7.hf.space/health|TOKEN_36MWOJIK_Q5MDL7
            https://36mwojik-ag1jd0.hf.space/health|TOKEN_36MWOJIK_AG1JD0
            https://36mwojik-jua339.hf.space/health|TOKEN_36MWOJIK_JUA339
            https://1cyztrkj-mlyrjf.hf.space/health|TOKEN_1CYZTRKJ_MLYRJF
            https://1cyztrkj-ln0fz2.hf.space/health|TOKEN_1CYZTRKJ_LN0FZ2
            https://1cyztrkj-bs9i35.hf.space/health|TOKEN_1CYZTRKJ_BS9I35
            https://1cyztrkj-ueh8kg.hf.space/health|TOKEN_1CYZTRKJ_UEH8KG
            https://1cyztrkj-t5altu.hf.space/health|TOKEN_1CYZTRKJ_T5ALTU
            https://gpb77dws-s6z106.hf.space/health|TOKEN_GPB77DWS_S6Z106
            https://gpb77dws-49dabn.hf.space/health|TOKEN_GPB77DWS_49DABN
            https://gpb77dws-yqk1so.hf.space/health|TOKEN_GPB77DWS_YQK1SO
            https://gpb77dws-kpcw0k.hf.space/health|TOKEN_GPB77DWS_KPCW0K
            https://gpb77dws-fursnj.hf.space/health|TOKEN_GPB77DWS_FURSNJ
            https://rpfcg5xn-7u2ucb.hf.space/health|TOKEN_RPFCG5XN_7U2UCB
            https://rpfcg5xn-65cjo4.hf.space/health|TOKEN_RPFCG5XN_65CJO4
            https://rpfcg5xn-sqz268.hf.space/health|TOKEN_RPFCG5XN_SQZ268
            https://rpfcg5xn-4dbfj7.hf.space/health|TOKEN_RPFCG5XN_4DBFJ7
            https://rpfcg5xn-x2sqwc.hf.space/health|TOKEN_RPFCG5XN_X2SQWC
            https://vd2eyqev-w86z7w.hf.space/health|TOKEN_VD2EYQEV_W86Z7W
            https://vd2eyqev-thx93r.hf.space/health|TOKEN_VD2EYQEV_THX93R
            https://vd2eyqev-1am8oc.hf.space/health|TOKEN_VD2EYQEV_1AM8OC
            https://vd2eyqev-sywxx3.hf.space/health|TOKEN_VD2EYQEV_SYWXX3
            https://vd2eyqev-zkhxvy.hf.space/health|TOKEN_VD2EYQEV_ZKHXVY
            https://hasibxx2x-jm0fb1.hf.space/health|TOKEN_HASIBXX2X_JM0FB1
            https://hasibxx2x-v5e1i9.hf.space/health|TOKEN_HASIBXX2X_V5E1I9
            https://hasibxx2x-yv7w1y.hf.space/health|TOKEN_HASIBXX2X_YV7W1Y
            https://hasibxx2x-8i1vo3.hf.space/health|TOKEN_HASIBXX2X_8I1VO3
            https://hasibxx2x-pt9w8t.hf.space/health|TOKEN_HASIBXX2X_PT9W8T
            https://bdfbefbh-dsmww0.hf.space/health|TOKEN_BDFBEFBH_DSMWW0
            https://bdfbefbh-qef4ss.hf.space/health|TOKEN_BDFBEFBH_QEF4SS
            https://bdfbefbh-tyy34v.hf.space/health|TOKEN_BDFBEFBH_TYY34V
            https://bdfbefbh-larte2.hf.space/health|TOKEN_BDFBEFBH_LARTE2
            https://bdfbefbh-kobydy.hf.space/health|TOKEN_BDFBEFBH_KOBYDY
            https://muhammadshahalamsheikh-rulib7.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_RULIB7
            https://muhammadshahalamsheikh-p5j503.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_P5J503
            https://muhammadshahalamsheikh-5zuy97.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_5ZUY97
            https://muhammadshahalamsheikh-ce2tfc.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_CE2TFC
            https://muhammadshahalamsheikh-b72rg9.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_B72RG9
            https://htyjy6-tastq2.hf.space/health|TOKEN_HTYJY6_TASTQ2
            https://htyjy6-o06039.hf.space/health|TOKEN_HTYJY6_O06039
            https://htyjy6-uh782v.hf.space/health|TOKEN_HTYJY6_UH782V
            https://htyjy6-rect4z.hf.space/health|TOKEN_HTYJY6_RECT4Z
            https://htyjy6-sa0ve5.hf.space/health|TOKEN_HTYJY6_SA0VE5
        run: |
          get_token() {
            var_name=$1
            echo "${!var_name}"
          }

          echo "üöÄ Starting Parallel GET Checks (Max 20 concurrently)..."

          process_get() {
            entry=$1
            if [ -z "$entry" ]; then return; fi

            url="${entry%|*}"
            token_var="${entry#*|}"

            if [ "$token_var" == "NONE" ]; then
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 "$url")
            else
              token=$(get_token "$token_var")
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 -H "Authorization: Bearer $token" "$url")
            fi

            if [[ "$STATUS" =~ ^(200|405|401)$ ]]; then
               echo "‚úÖ GET OK ($STATUS): $url"
            else
               echo "‚ùå GET FAIL ($STATUS): $url"
            fi
          }

          export -f process_get
          export -f get_token

          MAX_PARALLEL=20

          for entry in $URLS; do
            process_get "$entry" &
            while [ "$(jobs -r | wc -l)" -ge "$MAX_PARALLEL" ]; do
                wait -n
            done
          done
          wait

          echo -e "
‚ú® Keep Alive (GET only) Complete."
