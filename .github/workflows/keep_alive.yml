name: Keep Spaces Alive (GET only)

on:
  schedule:
    - cron: "0 */12 * * *" # Every 12 hours
  workflow_dispatch:

jobs:
  ping_spaces:
    runs-on: ubuntu-latest
    steps:
      - name: Run Health Checks (GET /health)
        env:
          TOKEN_GFVBF_J7JO9T: ${{ secrets.HF_TOKEN_GFVBF_J7JO9T }}
          TOKEN_GFVBF_E97ZSI: ${{ secrets.HF_TOKEN_GFVBF_E97ZSI }}
          TOKEN_GFVBF_1ZH7N0: ${{ secrets.HF_TOKEN_GFVBF_1ZH7N0 }}
          TOKEN_GFVBF_5F0PNT: ${{ secrets.HF_TOKEN_GFVBF_5F0PNT }}
          TOKEN_GFVBF_LC3EMP: ${{ secrets.HF_TOKEN_GFVBF_LC3EMP }}
          TOKEN_GNBG_8XZHT7: ${{ secrets.HF_TOKEN_GNBG_8XZHT7 }}
          TOKEN_GNBG_9UNP4F: ${{ secrets.HF_TOKEN_GNBG_9UNP4F }}
          TOKEN_GNBG_B864HT: ${{ secrets.HF_TOKEN_GNBG_B864HT }}
          TOKEN_GNBG_D7JNPD: ${{ secrets.HF_TOKEN_GNBG_D7JNPD }}
          TOKEN_GNBG_IST5DA: ${{ secrets.HF_TOKEN_GNBG_IST5DA }}
          TOKEN_J6GEP5ZD_MB1S7Y: ${{ secrets.HF_TOKEN_J6GEP5ZD_MB1S7Y }}
          TOKEN_J6GEP5ZD_J0H41I: ${{ secrets.HF_TOKEN_J6GEP5ZD_J0H41I }}
          TOKEN_J6GEP5ZD_C9I784: ${{ secrets.HF_TOKEN_J6GEP5ZD_C9I784 }}
          TOKEN_J6GEP5ZD_2SZPW2: ${{ secrets.HF_TOKEN_J6GEP5ZD_2SZPW2 }}
          TOKEN_J6GEP5ZD_BNYI7C: ${{ secrets.HF_TOKEN_J6GEP5ZD_BNYI7C }}
          TOKEN_MFLRJ8FO_XDSS9X: ${{ secrets.HF_TOKEN_MFLRJ8FO_XDSS9X }}
          TOKEN_MFLRJ8FO_D5BTS8: ${{ secrets.HF_TOKEN_MFLRJ8FO_D5BTS8 }}
          TOKEN_MFLRJ8FO_8OGJRK: ${{ secrets.HF_TOKEN_MFLRJ8FO_8OGJRK }}
          TOKEN_MFLRJ8FO_Q5A811: ${{ secrets.HF_TOKEN_MFLRJ8FO_Q5A811 }}
          TOKEN_MFLRJ8FO_E1PEHL: ${{ secrets.HF_TOKEN_MFLRJ8FO_E1PEHL }}
          TOKEN_84Q1HGYE_DC9N5A: ${{ secrets.HF_TOKEN_84Q1HGYE_DC9N5A }}
          TOKEN_84Q1HGYE_OO4DTE: ${{ secrets.HF_TOKEN_84Q1HGYE_OO4DTE }}
          TOKEN_84Q1HGYE_FJKHON: ${{ secrets.HF_TOKEN_84Q1HGYE_FJKHON }}
          TOKEN_84Q1HGYE_UB3DPW: ${{ secrets.HF_TOKEN_84Q1HGYE_UB3DPW }}
          TOKEN_84Q1HGYE_ZCISBA: ${{ secrets.HF_TOKEN_84Q1HGYE_ZCISBA }}
          TOKEN_BWX2LINR_NI1GH6: ${{ secrets.HF_TOKEN_BWX2LINR_NI1GH6 }}
          TOKEN_BWX2LINR_OVF597: ${{ secrets.HF_TOKEN_BWX2LINR_OVF597 }}
          TOKEN_BWX2LINR_LBYPAF: ${{ secrets.HF_TOKEN_BWX2LINR_LBYPAF }}
          TOKEN_BWX2LINR_N1J3K4: ${{ secrets.HF_TOKEN_BWX2LINR_N1J3K4 }}
          TOKEN_BWX2LINR_PVB4XN: ${{ secrets.HF_TOKEN_BWX2LINR_PVB4XN }}
          TOKEN_36MWOJIK_TX8JHQ: ${{ secrets.HF_TOKEN_36MWOJIK_TX8JHQ }}
          TOKEN_36MWOJIK_HANZFK: ${{ secrets.HF_TOKEN_36MWOJIK_HANZFK }}
          TOKEN_36MWOJIK_20LQMQ: ${{ secrets.HF_TOKEN_36MWOJIK_20LQMQ }}
          TOKEN_36MWOJIK_Z6F8BC: ${{ secrets.HF_TOKEN_36MWOJIK_Z6F8BC }}
          TOKEN_36MWOJIK_8YVE77: ${{ secrets.HF_TOKEN_36MWOJIK_8YVE77 }}
          TOKEN_1CYZTRKJ_YJCZBL: ${{ secrets.HF_TOKEN_1CYZTRKJ_YJCZBL }}
          TOKEN_1CYZTRKJ_VAWMOZ: ${{ secrets.HF_TOKEN_1CYZTRKJ_VAWMOZ }}
          TOKEN_1CYZTRKJ_2N4Q1I: ${{ secrets.HF_TOKEN_1CYZTRKJ_2N4Q1I }}
          TOKEN_1CYZTRKJ_0E5TLG: ${{ secrets.HF_TOKEN_1CYZTRKJ_0E5TLG }}
          TOKEN_1CYZTRKJ_0JAZT3: ${{ secrets.HF_TOKEN_1CYZTRKJ_0JAZT3 }}
          TOKEN_GPB77DWS_34UHJP: ${{ secrets.HF_TOKEN_GPB77DWS_34UHJP }}
          TOKEN_GPB77DWS_VOXS0L: ${{ secrets.HF_TOKEN_GPB77DWS_VOXS0L }}
          TOKEN_GPB77DWS_9JU8SP: ${{ secrets.HF_TOKEN_GPB77DWS_9JU8SP }}
          TOKEN_GPB77DWS_EQYVNA: ${{ secrets.HF_TOKEN_GPB77DWS_EQYVNA }}
          TOKEN_GPB77DWS_KE44QK: ${{ secrets.HF_TOKEN_GPB77DWS_KE44QK }}
          TOKEN_RPFCG5XN_JWAH01: ${{ secrets.HF_TOKEN_RPFCG5XN_JWAH01 }}
          TOKEN_RPFCG5XN_UD63RT: ${{ secrets.HF_TOKEN_RPFCG5XN_UD63RT }}
          TOKEN_RPFCG5XN_9X5A8I: ${{ secrets.HF_TOKEN_RPFCG5XN_9X5A8I }}
          TOKEN_RPFCG5XN_D9TOPD: ${{ secrets.HF_TOKEN_RPFCG5XN_D9TOPD }}
          TOKEN_RPFCG5XN_231XYT: ${{ secrets.HF_TOKEN_RPFCG5XN_231XYT }}
          TOKEN_VD2EYQEV_GQIUYU: ${{ secrets.HF_TOKEN_VD2EYQEV_GQIUYU }}
          TOKEN_VD2EYQEV_8RLUYY: ${{ secrets.HF_TOKEN_VD2EYQEV_8RLUYY }}
          TOKEN_VD2EYQEV_TDP8K9: ${{ secrets.HF_TOKEN_VD2EYQEV_TDP8K9 }}
          TOKEN_VD2EYQEV_02TG53: ${{ secrets.HF_TOKEN_VD2EYQEV_02TG53 }}
          TOKEN_VD2EYQEV_N982ES: ${{ secrets.HF_TOKEN_VD2EYQEV_N982ES }}
          TOKEN_HASIBXX2X_UCFN44: ${{ secrets.HF_TOKEN_HASIBXX2X_UCFN44 }}
          TOKEN_HASIBXX2X_294WYQ: ${{ secrets.HF_TOKEN_HASIBXX2X_294WYQ }}
          TOKEN_HASIBXX2X_WHCOD4: ${{ secrets.HF_TOKEN_HASIBXX2X_WHCOD4 }}
          TOKEN_HASIBXX2X_STIC5S: ${{ secrets.HF_TOKEN_HASIBXX2X_STIC5S }}
          TOKEN_HASIBXX2X_2KKBI1: ${{ secrets.HF_TOKEN_HASIBXX2X_2KKBI1 }}
          TOKEN_BDFBEFBH_CW0DIM: ${{ secrets.HF_TOKEN_BDFBEFBH_CW0DIM }}
          TOKEN_BDFBEFBH_JRZ02N: ${{ secrets.HF_TOKEN_BDFBEFBH_JRZ02N }}
          TOKEN_BDFBEFBH_VL835G: ${{ secrets.HF_TOKEN_BDFBEFBH_VL835G }}
          TOKEN_BDFBEFBH_MRE0DM: ${{ secrets.HF_TOKEN_BDFBEFBH_MRE0DM }}
          TOKEN_BDFBEFBH_1N5BH7: ${{ secrets.HF_TOKEN_BDFBEFBH_1N5BH7 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_2ET3SC: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_2ET3SC }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_7YZ5AX: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_7YZ5AX }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_22EWIP: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_22EWIP }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_M02HZS: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_M02HZS }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_X2E6HW: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_X2E6HW }}
          TOKEN_HTYJY6_B1N0BH: ${{ secrets.HF_TOKEN_HTYJY6_B1N0BH }}
          TOKEN_HTYJY6_WWDHHO: ${{ secrets.HF_TOKEN_HTYJY6_WWDHHO }}
          TOKEN_HTYJY6_N8YXPX: ${{ secrets.HF_TOKEN_HTYJY6_N8YXPX }}
          TOKEN_HTYJY6_PNYG0Y: ${{ secrets.HF_TOKEN_HTYJY6_PNYG0Y }}
          TOKEN_HTYJY6_8MZYP6: ${{ secrets.HF_TOKEN_HTYJY6_8MZYP6 }}

          # URL List for GET Checks
          URLS: >
            https://gfvbf-j7jo9t.hf.space/health|TOKEN_GFVBF_J7JO9T
            https://gfvbf-e97zsi.hf.space/health|TOKEN_GFVBF_E97ZSI
            https://gfvbf-1zh7n0.hf.space/health|TOKEN_GFVBF_1ZH7N0
            https://gfvbf-5f0pnt.hf.space/health|TOKEN_GFVBF_5F0PNT
            https://gfvbf-lc3emp.hf.space/health|TOKEN_GFVBF_LC3EMP
            https://gnbg-8xzht7.hf.space/health|TOKEN_GNBG_8XZHT7
            https://gnbg-9unp4f.hf.space/health|TOKEN_GNBG_9UNP4F
            https://gnbg-b864ht.hf.space/health|TOKEN_GNBG_B864HT
            https://gnbg-d7jnpd.hf.space/health|TOKEN_GNBG_D7JNPD
            https://gnbg-ist5da.hf.space/health|TOKEN_GNBG_IST5DA
            https://j6gep5zd-mb1s7y.hf.space/health|TOKEN_J6GEP5ZD_MB1S7Y
            https://j6gep5zd-j0h41i.hf.space/health|TOKEN_J6GEP5ZD_J0H41I
            https://j6gep5zd-c9i784.hf.space/health|TOKEN_J6GEP5ZD_C9I784
            https://j6gep5zd-2szpw2.hf.space/health|TOKEN_J6GEP5ZD_2SZPW2
            https://j6gep5zd-bnyi7c.hf.space/health|TOKEN_J6GEP5ZD_BNYI7C
            https://mflrj8fo-xdss9x.hf.space/health|TOKEN_MFLRJ8FO_XDSS9X
            https://mflrj8fo-d5bts8.hf.space/health|TOKEN_MFLRJ8FO_D5BTS8
            https://mflrj8fo-8ogjrk.hf.space/health|TOKEN_MFLRJ8FO_8OGJRK
            https://mflrj8fo-q5a811.hf.space/health|TOKEN_MFLRJ8FO_Q5A811
            https://mflrj8fo-e1pehl.hf.space/health|TOKEN_MFLRJ8FO_E1PEHL
            https://84q1hgye-dc9n5a.hf.space/health|TOKEN_84Q1HGYE_DC9N5A
            https://84q1hgye-oo4dte.hf.space/health|TOKEN_84Q1HGYE_OO4DTE
            https://84q1hgye-fjkhon.hf.space/health|TOKEN_84Q1HGYE_FJKHON
            https://84q1hgye-ub3dpw.hf.space/health|TOKEN_84Q1HGYE_UB3DPW
            https://84q1hgye-zcisba.hf.space/health|TOKEN_84Q1HGYE_ZCISBA
            https://bwx2linr-ni1gh6.hf.space/health|TOKEN_BWX2LINR_NI1GH6
            https://bwx2linr-ovf597.hf.space/health|TOKEN_BWX2LINR_OVF597
            https://bwx2linr-lbypaf.hf.space/health|TOKEN_BWX2LINR_LBYPAF
            https://bwx2linr-n1j3k4.hf.space/health|TOKEN_BWX2LINR_N1J3K4
            https://bwx2linr-pvb4xn.hf.space/health|TOKEN_BWX2LINR_PVB4XN
            https://36mwojik-tx8jhq.hf.space/health|TOKEN_36MWOJIK_TX8JHQ
            https://36mwojik-hanzfk.hf.space/health|TOKEN_36MWOJIK_HANZFK
            https://36mwojik-20lqmq.hf.space/health|TOKEN_36MWOJIK_20LQMQ
            https://36mwojik-z6f8bc.hf.space/health|TOKEN_36MWOJIK_Z6F8BC
            https://36mwojik-8yve77.hf.space/health|TOKEN_36MWOJIK_8YVE77
            https://1cyztrkj-yjczbl.hf.space/health|TOKEN_1CYZTRKJ_YJCZBL
            https://1cyztrkj-vawmoz.hf.space/health|TOKEN_1CYZTRKJ_VAWMOZ
            https://1cyztrkj-2n4q1i.hf.space/health|TOKEN_1CYZTRKJ_2N4Q1I
            https://1cyztrkj-0e5tlg.hf.space/health|TOKEN_1CYZTRKJ_0E5TLG
            https://1cyztrkj-0jazt3.hf.space/health|TOKEN_1CYZTRKJ_0JAZT3
            https://gpb77dws-34uhjp.hf.space/health|TOKEN_GPB77DWS_34UHJP
            https://gpb77dws-voxs0l.hf.space/health|TOKEN_GPB77DWS_VOXS0L
            https://gpb77dws-9ju8sp.hf.space/health|TOKEN_GPB77DWS_9JU8SP
            https://gpb77dws-eqyvna.hf.space/health|TOKEN_GPB77DWS_EQYVNA
            https://gpb77dws-ke44qk.hf.space/health|TOKEN_GPB77DWS_KE44QK
            https://rpfcg5xn-jwah01.hf.space/health|TOKEN_RPFCG5XN_JWAH01
            https://rpfcg5xn-ud63rt.hf.space/health|TOKEN_RPFCG5XN_UD63RT
            https://rpfcg5xn-9x5a8i.hf.space/health|TOKEN_RPFCG5XN_9X5A8I
            https://rpfcg5xn-d9topd.hf.space/health|TOKEN_RPFCG5XN_D9TOPD
            https://rpfcg5xn-231xyt.hf.space/health|TOKEN_RPFCG5XN_231XYT
            https://vd2eyqev-gqiuyu.hf.space/health|TOKEN_VD2EYQEV_GQIUYU
            https://vd2eyqev-8rluyy.hf.space/health|TOKEN_VD2EYQEV_8RLUYY
            https://vd2eyqev-tdp8k9.hf.space/health|TOKEN_VD2EYQEV_TDP8K9
            https://vd2eyqev-02tg53.hf.space/health|TOKEN_VD2EYQEV_02TG53
            https://vd2eyqev-n982es.hf.space/health|TOKEN_VD2EYQEV_N982ES
            https://hasibxx2x-ucfn44.hf.space/health|TOKEN_HASIBXX2X_UCFN44
            https://hasibxx2x-294wyq.hf.space/health|TOKEN_HASIBXX2X_294WYQ
            https://hasibxx2x-whcod4.hf.space/health|TOKEN_HASIBXX2X_WHCOD4
            https://hasibxx2x-stic5s.hf.space/health|TOKEN_HASIBXX2X_STIC5S
            https://hasibxx2x-2kkbi1.hf.space/health|TOKEN_HASIBXX2X_2KKBI1
            https://bdfbefbh-cw0dim.hf.space/health|TOKEN_BDFBEFBH_CW0DIM
            https://bdfbefbh-jrz02n.hf.space/health|TOKEN_BDFBEFBH_JRZ02N
            https://bdfbefbh-vl835g.hf.space/health|TOKEN_BDFBEFBH_VL835G
            https://bdfbefbh-mre0dm.hf.space/health|TOKEN_BDFBEFBH_MRE0DM
            https://bdfbefbh-1n5bh7.hf.space/health|TOKEN_BDFBEFBH_1N5BH7
            https://muhammadshahalamsheikh-2et3sc.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_2ET3SC
            https://muhammadshahalamsheikh-7yz5ax.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_7YZ5AX
            https://muhammadshahalamsheikh-22ewip.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_22EWIP
            https://muhammadshahalamsheikh-m02hzs.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_M02HZS
            https://muhammadshahalamsheikh-x2e6hw.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_X2E6HW
            https://htyjy6-b1n0bh.hf.space/health|TOKEN_HTYJY6_B1N0BH
            https://htyjy6-wwdhho.hf.space/health|TOKEN_HTYJY6_WWDHHO
            https://htyjy6-n8yxpx.hf.space/health|TOKEN_HTYJY6_N8YXPX
            https://htyjy6-pnyg0y.hf.space/health|TOKEN_HTYJY6_PNYG0Y
            https://htyjy6-8mzyp6.hf.space/health|TOKEN_HTYJY6_8MZYP6
        run: |
          get_token() {
            var_name=$1
            echo "${!var_name}"
          }

          echo "üöÄ Starting Parallel GET Checks (Max 20 concurrently)..."

          process_get() {
            entry=$1
            if [ -z "$entry" ]; then return; fi

            url="${entry%|*}"
            token_var="${entry#*|}"

            if [ "$token_var" == "NONE" ]; then
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 "$url")
            else
              token=$(get_token "$token_var")
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 -H "Authorization: Bearer $token" "$url")
            fi

            if [[ "$STATUS" =~ ^(200|405|401)$ ]]; then
               echo "‚úÖ GET OK ($STATUS): $url"
            else
               echo "‚ùå GET FAIL ($STATUS): $url"
            fi
          }

          export -f process_get
          export -f get_token

          MAX_PARALLEL=20

          for entry in $URLS; do
            process_get "$entry" &
            while [ "$(jobs -r | wc -l)" -ge "$MAX_PARALLEL" ]; do
                wait -n
            done
          done
          wait

          echo -e "
‚ú® Keep Alive (GET only) Complete."
