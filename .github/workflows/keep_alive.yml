name: Keep Spaces Alive (GET only)

on:
  schedule:
    - cron: "0 */12 * * *" # Every 12 hours
  workflow_dispatch:

jobs:
  ping_spaces:
    runs-on: ubuntu-latest
    steps:
      - name: Run Health Checks (GET /health)
        env:
          TOKEN_GFVBF_PXEW3Z: ${{ secrets.HF_TOKEN_GFVBF_PXEW3Z }}
          TOKEN_GFVBF_8X38CN: ${{ secrets.HF_TOKEN_GFVBF_8X38CN }}
          TOKEN_GFVBF_62N757: ${{ secrets.HF_TOKEN_GFVBF_62N757 }}
          TOKEN_GFVBF_P0AD5I: ${{ secrets.HF_TOKEN_GFVBF_P0AD5I }}
          TOKEN_GFVBF_O48HZF: ${{ secrets.HF_TOKEN_GFVBF_O48HZF }}
          TOKEN_GNBG_LRQGGS: ${{ secrets.HF_TOKEN_GNBG_LRQGGS }}
          TOKEN_GNBG_J6YOF1: ${{ secrets.HF_TOKEN_GNBG_J6YOF1 }}
          TOKEN_GNBG_O2MZ6R: ${{ secrets.HF_TOKEN_GNBG_O2MZ6R }}
          TOKEN_GNBG_U7ZD9G: ${{ secrets.HF_TOKEN_GNBG_U7ZD9G }}
          TOKEN_GNBG_14E5K7: ${{ secrets.HF_TOKEN_GNBG_14E5K7 }}
          TOKEN_J6GEP5ZD_O93SIT: ${{ secrets.HF_TOKEN_J6GEP5ZD_O93SIT }}
          TOKEN_J6GEP5ZD_E92NDH: ${{ secrets.HF_TOKEN_J6GEP5ZD_E92NDH }}
          TOKEN_J6GEP5ZD_NO055X: ${{ secrets.HF_TOKEN_J6GEP5ZD_NO055X }}
          TOKEN_J6GEP5ZD_IS90CI: ${{ secrets.HF_TOKEN_J6GEP5ZD_IS90CI }}
          TOKEN_J6GEP5ZD_5ERQ3J: ${{ secrets.HF_TOKEN_J6GEP5ZD_5ERQ3J }}
          TOKEN_MFLRJ8FO_ASKZSW: ${{ secrets.HF_TOKEN_MFLRJ8FO_ASKZSW }}
          TOKEN_MFLRJ8FO_EI08JM: ${{ secrets.HF_TOKEN_MFLRJ8FO_EI08JM }}
          TOKEN_MFLRJ8FO_UYDPXQ: ${{ secrets.HF_TOKEN_MFLRJ8FO_UYDPXQ }}
          TOKEN_MFLRJ8FO_S6TUSU: ${{ secrets.HF_TOKEN_MFLRJ8FO_S6TUSU }}
          TOKEN_MFLRJ8FO_Z20KLA: ${{ secrets.HF_TOKEN_MFLRJ8FO_Z20KLA }}
          TOKEN_84Q1HGYE_V3M4O8: ${{ secrets.HF_TOKEN_84Q1HGYE_V3M4O8 }}
          TOKEN_84Q1HGYE_CE5AAO: ${{ secrets.HF_TOKEN_84Q1HGYE_CE5AAO }}
          TOKEN_84Q1HGYE_IGSNSP: ${{ secrets.HF_TOKEN_84Q1HGYE_IGSNSP }}
          TOKEN_84Q1HGYE_SOXAAQ: ${{ secrets.HF_TOKEN_84Q1HGYE_SOXAAQ }}
          TOKEN_84Q1HGYE_83G5OU: ${{ secrets.HF_TOKEN_84Q1HGYE_83G5OU }}
          TOKEN_BWX2LINR_HVXBM2: ${{ secrets.HF_TOKEN_BWX2LINR_HVXBM2 }}
          TOKEN_BWX2LINR_AVU0MS: ${{ secrets.HF_TOKEN_BWX2LINR_AVU0MS }}
          TOKEN_BWX2LINR_Y0W0EL: ${{ secrets.HF_TOKEN_BWX2LINR_Y0W0EL }}
          TOKEN_BWX2LINR_97T9OX: ${{ secrets.HF_TOKEN_BWX2LINR_97T9OX }}
          TOKEN_BWX2LINR_GT71E0: ${{ secrets.HF_TOKEN_BWX2LINR_GT71E0 }}
          TOKEN_36MWOJIK_JAO5ZM: ${{ secrets.HF_TOKEN_36MWOJIK_JAO5ZM }}
          TOKEN_36MWOJIK_NRNTT9: ${{ secrets.HF_TOKEN_36MWOJIK_NRNTT9 }}
          TOKEN_36MWOJIK_GMVVR5: ${{ secrets.HF_TOKEN_36MWOJIK_GMVVR5 }}
          TOKEN_36MWOJIK_14DSYR: ${{ secrets.HF_TOKEN_36MWOJIK_14DSYR }}
          TOKEN_36MWOJIK_LE8Z3O: ${{ secrets.HF_TOKEN_36MWOJIK_LE8Z3O }}
          TOKEN_1CYZTRKJ_LFE6AD: ${{ secrets.HF_TOKEN_1CYZTRKJ_LFE6AD }}
          TOKEN_1CYZTRKJ_50I15G: ${{ secrets.HF_TOKEN_1CYZTRKJ_50I15G }}
          TOKEN_1CYZTRKJ_0W9Y8R: ${{ secrets.HF_TOKEN_1CYZTRKJ_0W9Y8R }}
          TOKEN_1CYZTRKJ_GJ2S6O: ${{ secrets.HF_TOKEN_1CYZTRKJ_GJ2S6O }}
          TOKEN_1CYZTRKJ_6WXUSJ: ${{ secrets.HF_TOKEN_1CYZTRKJ_6WXUSJ }}
          TOKEN_GPB77DWS_WWE4PA: ${{ secrets.HF_TOKEN_GPB77DWS_WWE4PA }}
          TOKEN_GPB77DWS_B25DRS: ${{ secrets.HF_TOKEN_GPB77DWS_B25DRS }}
          TOKEN_GPB77DWS_F16N7M: ${{ secrets.HF_TOKEN_GPB77DWS_F16N7M }}
          TOKEN_GPB77DWS_DDKJCE: ${{ secrets.HF_TOKEN_GPB77DWS_DDKJCE }}
          TOKEN_GPB77DWS_IY0BK7: ${{ secrets.HF_TOKEN_GPB77DWS_IY0BK7 }}
          TOKEN_RPFCG5XN_90P1HB: ${{ secrets.HF_TOKEN_RPFCG5XN_90P1HB }}
          TOKEN_RPFCG5XN_DSV4PL: ${{ secrets.HF_TOKEN_RPFCG5XN_DSV4PL }}
          TOKEN_RPFCG5XN_T8BEJD: ${{ secrets.HF_TOKEN_RPFCG5XN_T8BEJD }}
          TOKEN_RPFCG5XN_B7U6QY: ${{ secrets.HF_TOKEN_RPFCG5XN_B7U6QY }}
          TOKEN_RPFCG5XN_OAJZTE: ${{ secrets.HF_TOKEN_RPFCG5XN_OAJZTE }}
          TOKEN_VD2EYQEV_MX10DT: ${{ secrets.HF_TOKEN_VD2EYQEV_MX10DT }}
          TOKEN_VD2EYQEV_ZJ6DWM: ${{ secrets.HF_TOKEN_VD2EYQEV_ZJ6DWM }}
          TOKEN_VD2EYQEV_SQLLUM: ${{ secrets.HF_TOKEN_VD2EYQEV_SQLLUM }}
          TOKEN_VD2EYQEV_A8OAGI: ${{ secrets.HF_TOKEN_VD2EYQEV_A8OAGI }}
          TOKEN_VD2EYQEV_YH4E2P: ${{ secrets.HF_TOKEN_VD2EYQEV_YH4E2P }}
          TOKEN_HASIBXX2X_6Q401W: ${{ secrets.HF_TOKEN_HASIBXX2X_6Q401W }}
          TOKEN_HASIBXX2X_6CI7OM: ${{ secrets.HF_TOKEN_HASIBXX2X_6CI7OM }}
          TOKEN_HASIBXX2X_CCD3VM: ${{ secrets.HF_TOKEN_HASIBXX2X_CCD3VM }}
          TOKEN_HASIBXX2X_Z3F3I1: ${{ secrets.HF_TOKEN_HASIBXX2X_Z3F3I1 }}
          TOKEN_HASIBXX2X_XWI3BM: ${{ secrets.HF_TOKEN_HASIBXX2X_XWI3BM }}
          TOKEN_BDFBEFBH_9CWOLE: ${{ secrets.HF_TOKEN_BDFBEFBH_9CWOLE }}
          TOKEN_BDFBEFBH_KAIA86: ${{ secrets.HF_TOKEN_BDFBEFBH_KAIA86 }}
          TOKEN_BDFBEFBH_CQ66LO: ${{ secrets.HF_TOKEN_BDFBEFBH_CQ66LO }}
          TOKEN_BDFBEFBH_Q0SB78: ${{ secrets.HF_TOKEN_BDFBEFBH_Q0SB78 }}
          TOKEN_BDFBEFBH_2F2DS2: ${{ secrets.HF_TOKEN_BDFBEFBH_2F2DS2 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_V4Q1A2: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_V4Q1A2 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_KSV1O4: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_KSV1O4 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_2RWAOT: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_2RWAOT }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_DYL966: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_DYL966 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_L12J62: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_L12J62 }}
          TOKEN_HTYJY6_MS654Y: ${{ secrets.HF_TOKEN_HTYJY6_MS654Y }}
          TOKEN_HTYJY6_ATCBQH: ${{ secrets.HF_TOKEN_HTYJY6_ATCBQH }}
          TOKEN_HTYJY6_98R96B: ${{ secrets.HF_TOKEN_HTYJY6_98R96B }}
          TOKEN_HTYJY6_9CX97W: ${{ secrets.HF_TOKEN_HTYJY6_9CX97W }}
          TOKEN_HTYJY6_XDC5UC: ${{ secrets.HF_TOKEN_HTYJY6_XDC5UC }}

          # URL List for GET Checks
          URLS: >
            https://gfvbf-pxew3z.hf.space/health|TOKEN_GFVBF_PXEW3Z
            https://gfvbf-8x38cn.hf.space/health|TOKEN_GFVBF_8X38CN
            https://gfvbf-62n757.hf.space/health|TOKEN_GFVBF_62N757
            https://gfvbf-p0ad5i.hf.space/health|TOKEN_GFVBF_P0AD5I
            https://gfvbf-o48hzf.hf.space/health|TOKEN_GFVBF_O48HZF
            https://gnbg-lrqggs.hf.space/health|TOKEN_GNBG_LRQGGS
            https://gnbg-j6yof1.hf.space/health|TOKEN_GNBG_J6YOF1
            https://gnbg-o2mz6r.hf.space/health|TOKEN_GNBG_O2MZ6R
            https://gnbg-u7zd9g.hf.space/health|TOKEN_GNBG_U7ZD9G
            https://gnbg-14e5k7.hf.space/health|TOKEN_GNBG_14E5K7
            https://j6gep5zd-o93sit.hf.space/health|TOKEN_J6GEP5ZD_O93SIT
            https://j6gep5zd-e92ndh.hf.space/health|TOKEN_J6GEP5ZD_E92NDH
            https://j6gep5zd-no055x.hf.space/health|TOKEN_J6GEP5ZD_NO055X
            https://j6gep5zd-is90ci.hf.space/health|TOKEN_J6GEP5ZD_IS90CI
            https://j6gep5zd-5erq3j.hf.space/health|TOKEN_J6GEP5ZD_5ERQ3J
            https://mflrj8fo-askzsw.hf.space/health|TOKEN_MFLRJ8FO_ASKZSW
            https://mflrj8fo-ei08jm.hf.space/health|TOKEN_MFLRJ8FO_EI08JM
            https://mflrj8fo-uydpxq.hf.space/health|TOKEN_MFLRJ8FO_UYDPXQ
            https://mflrj8fo-s6tusu.hf.space/health|TOKEN_MFLRJ8FO_S6TUSU
            https://mflrj8fo-z20kla.hf.space/health|TOKEN_MFLRJ8FO_Z20KLA
            https://84q1hgye-v3m4o8.hf.space/health|TOKEN_84Q1HGYE_V3M4O8
            https://84q1hgye-ce5aao.hf.space/health|TOKEN_84Q1HGYE_CE5AAO
            https://84q1hgye-igsnsp.hf.space/health|TOKEN_84Q1HGYE_IGSNSP
            https://84q1hgye-soxaaq.hf.space/health|TOKEN_84Q1HGYE_SOXAAQ
            https://84q1hgye-83g5ou.hf.space/health|TOKEN_84Q1HGYE_83G5OU
            https://bwx2linr-hvxbm2.hf.space/health|TOKEN_BWX2LINR_HVXBM2
            https://bwx2linr-avu0ms.hf.space/health|TOKEN_BWX2LINR_AVU0MS
            https://bwx2linr-y0w0el.hf.space/health|TOKEN_BWX2LINR_Y0W0EL
            https://bwx2linr-97t9ox.hf.space/health|TOKEN_BWX2LINR_97T9OX
            https://bwx2linr-gt71e0.hf.space/health|TOKEN_BWX2LINR_GT71E0
            https://36mwojik-jao5zm.hf.space/health|TOKEN_36MWOJIK_JAO5ZM
            https://36mwojik-nrntt9.hf.space/health|TOKEN_36MWOJIK_NRNTT9
            https://36mwojik-gmvvr5.hf.space/health|TOKEN_36MWOJIK_GMVVR5
            https://36mwojik-14dsyr.hf.space/health|TOKEN_36MWOJIK_14DSYR
            https://36mwojik-le8z3o.hf.space/health|TOKEN_36MWOJIK_LE8Z3O
            https://1cyztrkj-lfe6ad.hf.space/health|TOKEN_1CYZTRKJ_LFE6AD
            https://1cyztrkj-50i15g.hf.space/health|TOKEN_1CYZTRKJ_50I15G
            https://1cyztrkj-0w9y8r.hf.space/health|TOKEN_1CYZTRKJ_0W9Y8R
            https://1cyztrkj-gj2s6o.hf.space/health|TOKEN_1CYZTRKJ_GJ2S6O
            https://1cyztrkj-6wxusj.hf.space/health|TOKEN_1CYZTRKJ_6WXUSJ
            https://gpb77dws-wwe4pa.hf.space/health|TOKEN_GPB77DWS_WWE4PA
            https://gpb77dws-b25drs.hf.space/health|TOKEN_GPB77DWS_B25DRS
            https://gpb77dws-f16n7m.hf.space/health|TOKEN_GPB77DWS_F16N7M
            https://gpb77dws-ddkjce.hf.space/health|TOKEN_GPB77DWS_DDKJCE
            https://gpb77dws-iy0bk7.hf.space/health|TOKEN_GPB77DWS_IY0BK7
            https://rpfcg5xn-90p1hb.hf.space/health|TOKEN_RPFCG5XN_90P1HB
            https://rpfcg5xn-dsv4pl.hf.space/health|TOKEN_RPFCG5XN_DSV4PL
            https://rpfcg5xn-t8bejd.hf.space/health|TOKEN_RPFCG5XN_T8BEJD
            https://rpfcg5xn-b7u6qy.hf.space/health|TOKEN_RPFCG5XN_B7U6QY
            https://rpfcg5xn-oajzte.hf.space/health|TOKEN_RPFCG5XN_OAJZTE
            https://vd2eyqev-mx10dt.hf.space/health|TOKEN_VD2EYQEV_MX10DT
            https://vd2eyqev-zj6dwm.hf.space/health|TOKEN_VD2EYQEV_ZJ6DWM
            https://vd2eyqev-sqllum.hf.space/health|TOKEN_VD2EYQEV_SQLLUM
            https://vd2eyqev-a8oagi.hf.space/health|TOKEN_VD2EYQEV_A8OAGI
            https://vd2eyqev-yh4e2p.hf.space/health|TOKEN_VD2EYQEV_YH4E2P
            https://hasibxx2x-6q401w.hf.space/health|TOKEN_HASIBXX2X_6Q401W
            https://hasibxx2x-6ci7om.hf.space/health|TOKEN_HASIBXX2X_6CI7OM
            https://hasibxx2x-ccd3vm.hf.space/health|TOKEN_HASIBXX2X_CCD3VM
            https://hasibxx2x-z3f3i1.hf.space/health|TOKEN_HASIBXX2X_Z3F3I1
            https://hasibxx2x-xwi3bm.hf.space/health|TOKEN_HASIBXX2X_XWI3BM
            https://bdfbefbh-9cwole.hf.space/health|TOKEN_BDFBEFBH_9CWOLE
            https://bdfbefbh-kaia86.hf.space/health|TOKEN_BDFBEFBH_KAIA86
            https://bdfbefbh-cq66lo.hf.space/health|TOKEN_BDFBEFBH_CQ66LO
            https://bdfbefbh-q0sb78.hf.space/health|TOKEN_BDFBEFBH_Q0SB78
            https://bdfbefbh-2f2ds2.hf.space/health|TOKEN_BDFBEFBH_2F2DS2
            https://muhammadshahalamsheikh-v4q1a2.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_V4Q1A2
            https://muhammadshahalamsheikh-ksv1o4.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_KSV1O4
            https://muhammadshahalamsheikh-2rwaot.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_2RWAOT
            https://muhammadshahalamsheikh-dyl966.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_DYL966
            https://muhammadshahalamsheikh-l12j62.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_L12J62
            https://htyjy6-ms654y.hf.space/health|TOKEN_HTYJY6_MS654Y
            https://htyjy6-atcbqh.hf.space/health|TOKEN_HTYJY6_ATCBQH
            https://htyjy6-98r96b.hf.space/health|TOKEN_HTYJY6_98R96B
            https://htyjy6-9cx97w.hf.space/health|TOKEN_HTYJY6_9CX97W
            https://htyjy6-xdc5uc.hf.space/health|TOKEN_HTYJY6_XDC5UC
        run: |
          get_token() {
            var_name=$1
            echo "${!var_name}"
          }

          echo "üöÄ Starting Parallel GET Checks (Max 20 concurrently)..."

          process_get() {
            entry=$1
            if [ -z "$entry" ]; then return; fi

            url="${entry%|*}"
            token_var="${entry#*|}"

            if [ "$token_var" == "NONE" ]; then
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 "$url")
            else
              token=$(get_token "$token_var")
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 -H "Authorization: Bearer $token" "$url")
            fi

            if [[ "$STATUS" =~ ^(200|405|401)$ ]]; then
               echo "‚úÖ GET OK ($STATUS): $url"
            else
               echo "‚ùå GET FAIL ($STATUS): $url"
            fi
          }

          export -f process_get
          export -f get_token

          MAX_PARALLEL=20

          for entry in $URLS; do
            process_get "$entry" &
            while [ "$(jobs -r | wc -l)" -ge "$MAX_PARALLEL" ]; do
                wait -n
            done
          done
          wait

          echo -e "
‚ú® Keep Alive (GET only) Complete."
