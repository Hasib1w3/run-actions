name: Keep Spaces Alive

on:
  schedule:
    - cron: "0 */12 * * *" # Every 12 hours
  workflow_dispatch:

jobs:
  ping_spaces:
    runs-on: ubuntu-latest
    steps:
      - name: Run Health Checks
        env:
          TOKEN_GFVBF_CEA8AE: ${{ secrets.HF_TOKEN_GFVBF_CEA8AE }}
          TOKEN_GFVBF_VDWFLI: ${{ secrets.HF_TOKEN_GFVBF_VDWFLI }}
          TOKEN_GFVBF_B7X4M3: ${{ secrets.HF_TOKEN_GFVBF_B7X4M3 }}
          TOKEN_GFVBF_9SPERN: ${{ secrets.HF_TOKEN_GFVBF_9SPERN }}
          TOKEN_GFVBF_03HOZU: ${{ secrets.HF_TOKEN_GFVBF_03HOZU }}
          TOKEN_GNBG_1LHK7V: ${{ secrets.HF_TOKEN_GNBG_1LHK7V }}
          TOKEN_GNBG_T0298Y: ${{ secrets.HF_TOKEN_GNBG_T0298Y }}
          TOKEN_GNBG_10D483: ${{ secrets.HF_TOKEN_GNBG_10D483 }}
          TOKEN_GNBG_41LC8Y: ${{ secrets.HF_TOKEN_GNBG_41LC8Y }}
          TOKEN_GNBG_8ZTOMZ: ${{ secrets.HF_TOKEN_GNBG_8ZTOMZ }}
          TOKEN_J6GEP5ZD_E1NFR8: ${{ secrets.HF_TOKEN_J6GEP5ZD_E1NFR8 }}
          TOKEN_J6GEP5ZD_97UVDE: ${{ secrets.HF_TOKEN_J6GEP5ZD_97UVDE }}
          TOKEN_J6GEP5ZD_IUTW7W: ${{ secrets.HF_TOKEN_J6GEP5ZD_IUTW7W }}
          TOKEN_J6GEP5ZD_V4V0VT: ${{ secrets.HF_TOKEN_J6GEP5ZD_V4V0VT }}
          TOKEN_J6GEP5ZD_WHKLVJ: ${{ secrets.HF_TOKEN_J6GEP5ZD_WHKLVJ }}
          TOKEN_MFLRJ8FO_U3YI1K: ${{ secrets.HF_TOKEN_MFLRJ8FO_U3YI1K }}
          TOKEN_MFLRJ8FO_R0PY2X: ${{ secrets.HF_TOKEN_MFLRJ8FO_R0PY2X }}
          TOKEN_MFLRJ8FO_QV3V2T: ${{ secrets.HF_TOKEN_MFLRJ8FO_QV3V2T }}
          TOKEN_MFLRJ8FO_NGO6SJ: ${{ secrets.HF_TOKEN_MFLRJ8FO_NGO6SJ }}
          TOKEN_MFLRJ8FO_NTEPRV: ${{ secrets.HF_TOKEN_MFLRJ8FO_NTEPRV }}
          TOKEN_84Q1HGYE_BFLFL7: ${{ secrets.HF_TOKEN_84Q1HGYE_BFLFL7 }}
          TOKEN_84Q1HGYE_0MX2X4: ${{ secrets.HF_TOKEN_84Q1HGYE_0MX2X4 }}
          TOKEN_84Q1HGYE_GA9ADJ: ${{ secrets.HF_TOKEN_84Q1HGYE_GA9ADJ }}
          TOKEN_84Q1HGYE_7KLFUI: ${{ secrets.HF_TOKEN_84Q1HGYE_7KLFUI }}
          TOKEN_84Q1HGYE_9YJ6MP: ${{ secrets.HF_TOKEN_84Q1HGYE_9YJ6MP }}
          TOKEN_BWX2LINR_XIHBN0: ${{ secrets.HF_TOKEN_BWX2LINR_XIHBN0 }}
          TOKEN_BWX2LINR_LS1GFT: ${{ secrets.HF_TOKEN_BWX2LINR_LS1GFT }}
          TOKEN_BWX2LINR_B7OW00: ${{ secrets.HF_TOKEN_BWX2LINR_B7OW00 }}
          TOKEN_BWX2LINR_KCAYO8: ${{ secrets.HF_TOKEN_BWX2LINR_KCAYO8 }}
          TOKEN_BWX2LINR_419ZHV: ${{ secrets.HF_TOKEN_BWX2LINR_419ZHV }}
          TOKEN_GPB77DWS_S2JYWF: ${{ secrets.HF_TOKEN_GPB77DWS_S2JYWF }}
          TOKEN_GPB77DWS_JAWYR0: ${{ secrets.HF_TOKEN_GPB77DWS_JAWYR0 }}
          TOKEN_GPB77DWS_LRS7I5: ${{ secrets.HF_TOKEN_GPB77DWS_LRS7I5 }}
          TOKEN_GPB77DWS_B5SGQU: ${{ secrets.HF_TOKEN_GPB77DWS_B5SGQU }}
          TOKEN_GPB77DWS_B4S0K3: ${{ secrets.HF_TOKEN_GPB77DWS_B4S0K3 }}
          TOKEN_RPFCG5XN_F5DUOX: ${{ secrets.HF_TOKEN_RPFCG5XN_F5DUOX }}
          TOKEN_RPFCG5XN_JWNUYP: ${{ secrets.HF_TOKEN_RPFCG5XN_JWNUYP }}
          TOKEN_RPFCG5XN_T3XKGZ: ${{ secrets.HF_TOKEN_RPFCG5XN_T3XKGZ }}
          TOKEN_RPFCG5XN_NT60XE: ${{ secrets.HF_TOKEN_RPFCG5XN_NT60XE }}
          TOKEN_RPFCG5XN_4AHQZE: ${{ secrets.HF_TOKEN_RPFCG5XN_4AHQZE }}
          TOKEN_VD2EYQEV_44UYPS: ${{ secrets.HF_TOKEN_VD2EYQEV_44UYPS }}
          TOKEN_VD2EYQEV_46QBCS: ${{ secrets.HF_TOKEN_VD2EYQEV_46QBCS }}
          TOKEN_VD2EYQEV_8ML5CA: ${{ secrets.HF_TOKEN_VD2EYQEV_8ML5CA }}
          TOKEN_VD2EYQEV_02GRZJ: ${{ secrets.HF_TOKEN_VD2EYQEV_02GRZJ }}
          TOKEN_VD2EYQEV_WNSI2I: ${{ secrets.HF_TOKEN_VD2EYQEV_WNSI2I }}
          TOKEN_HASIBXX2X_FQY2GS: ${{ secrets.HF_TOKEN_HASIBXX2X_FQY2GS }}
          TOKEN_HASIBXX2X_ISLOK9: ${{ secrets.HF_TOKEN_HASIBXX2X_ISLOK9 }}
          TOKEN_HASIBXX2X_UI26XR: ${{ secrets.HF_TOKEN_HASIBXX2X_UI26XR }}
          TOKEN_HASIBXX2X_J5NX7Q: ${{ secrets.HF_TOKEN_HASIBXX2X_J5NX7Q }}
          TOKEN_HASIBXX2X_ABJRJT: ${{ secrets.HF_TOKEN_HASIBXX2X_ABJRJT }}
          TOKEN_BDFBEFBH_NEM2ER: ${{ secrets.HF_TOKEN_BDFBEFBH_NEM2ER }}
          TOKEN_BDFBEFBH_DLZ09F: ${{ secrets.HF_TOKEN_BDFBEFBH_DLZ09F }}
          TOKEN_BDFBEFBH_DWYOO2: ${{ secrets.HF_TOKEN_BDFBEFBH_DWYOO2 }}
          TOKEN_BDFBEFBH_TD2NNA: ${{ secrets.HF_TOKEN_BDFBEFBH_TD2NNA }}
          TOKEN_BDFBEFBH_O7GZBP: ${{ secrets.HF_TOKEN_BDFBEFBH_O7GZBP }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_CR2GSM: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_CR2GSM }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_PRJGM2: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_PRJGM2 }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_SLUYGU: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_SLUYGU }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_D7499M: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_D7499M }}
          TOKEN_MUHAMMADSHAHALAMSHEIKH_UBUR8H: ${{ secrets.HF_TOKEN_MUHAMMADSHAHALAMSHEIKH_UBUR8H }}
          TOKEN_HTYJY6_JQ7PNB: ${{ secrets.HF_TOKEN_HTYJY6_JQ7PNB }}
          TOKEN_HTYJY6_JNOWVI: ${{ secrets.HF_TOKEN_HTYJY6_JNOWVI }}
          TOKEN_HTYJY6_VA5QVH: ${{ secrets.HF_TOKEN_HTYJY6_VA5QVH }}
          TOKEN_HTYJY6_DOEZ38: ${{ secrets.HF_TOKEN_HTYJY6_DOEZ38 }}
          TOKEN_HTYJY6_F3CRBC: ${{ secrets.HF_TOKEN_HTYJY6_F3CRBC }}

          # URL List for GET Checks
          URLS: >
            https://gfvbf-cea8ae.hf.space/health|TOKEN_GFVBF_CEA8AE
            https://gfvbf-vdwfli.hf.space/health|TOKEN_GFVBF_VDWFLI
            https://gfvbf-b7x4m3.hf.space/health|TOKEN_GFVBF_B7X4M3
            https://gfvbf-9spern.hf.space/health|TOKEN_GFVBF_9SPERN
            https://gfvbf-03hozu.hf.space/health|TOKEN_GFVBF_03HOZU
            https://gnbg-1lhk7v.hf.space/health|TOKEN_GNBG_1LHK7V
            https://gnbg-t0298y.hf.space/health|TOKEN_GNBG_T0298Y
            https://gnbg-10d483.hf.space/health|TOKEN_GNBG_10D483
            https://gnbg-41lc8y.hf.space/health|TOKEN_GNBG_41LC8Y
            https://gnbg-8ztomz.hf.space/health|TOKEN_GNBG_8ZTOMZ
            https://j6gep5zd-e1nfr8.hf.space/health|TOKEN_J6GEP5ZD_E1NFR8
            https://j6gep5zd-97uvde.hf.space/health|TOKEN_J6GEP5ZD_97UVDE
            https://j6gep5zd-iutw7w.hf.space/health|TOKEN_J6GEP5ZD_IUTW7W
            https://j6gep5zd-v4v0vt.hf.space/health|TOKEN_J6GEP5ZD_V4V0VT
            https://j6gep5zd-whklvj.hf.space/health|TOKEN_J6GEP5ZD_WHKLVJ
            https://mflrj8fo-u3yi1k.hf.space/health|TOKEN_MFLRJ8FO_U3YI1K
            https://mflrj8fo-r0py2x.hf.space/health|TOKEN_MFLRJ8FO_R0PY2X
            https://mflrj8fo-qv3v2t.hf.space/health|TOKEN_MFLRJ8FO_QV3V2T
            https://mflrj8fo-ngo6sj.hf.space/health|TOKEN_MFLRJ8FO_NGO6SJ
            https://mflrj8fo-nteprv.hf.space/health|TOKEN_MFLRJ8FO_NTEPRV
            https://84q1hgye-bflfl7.hf.space/health|TOKEN_84Q1HGYE_BFLFL7
            https://84q1hgye-0mx2x4.hf.space/health|TOKEN_84Q1HGYE_0MX2X4
            https://84q1hgye-ga9adj.hf.space/health|TOKEN_84Q1HGYE_GA9ADJ
            https://84q1hgye-7klfui.hf.space/health|TOKEN_84Q1HGYE_7KLFUI
            https://84q1hgye-9yj6mp.hf.space/health|TOKEN_84Q1HGYE_9YJ6MP
            https://bwx2linr-xihbn0.hf.space/health|TOKEN_BWX2LINR_XIHBN0
            https://bwx2linr-ls1gft.hf.space/health|TOKEN_BWX2LINR_LS1GFT
            https://bwx2linr-b7ow00.hf.space/health|TOKEN_BWX2LINR_B7OW00
            https://bwx2linr-kcayo8.hf.space/health|TOKEN_BWX2LINR_KCAYO8
            https://bwx2linr-419zhv.hf.space/health|TOKEN_BWX2LINR_419ZHV
            https://gpb77dws-s2jywf.hf.space/health|TOKEN_GPB77DWS_S2JYWF
            https://gpb77dws-jawyr0.hf.space/health|TOKEN_GPB77DWS_JAWYR0
            https://gpb77dws-lrs7i5.hf.space/health|TOKEN_GPB77DWS_LRS7I5
            https://gpb77dws-b5sgqu.hf.space/health|TOKEN_GPB77DWS_B5SGQU
            https://gpb77dws-b4s0k3.hf.space/health|TOKEN_GPB77DWS_B4S0K3
            https://rpfcg5xn-f5duox.hf.space/health|TOKEN_RPFCG5XN_F5DUOX
            https://rpfcg5xn-jwnuyp.hf.space/health|TOKEN_RPFCG5XN_JWNUYP
            https://rpfcg5xn-t3xkgz.hf.space/health|TOKEN_RPFCG5XN_T3XKGZ
            https://rpfcg5xn-nt60xe.hf.space/health|TOKEN_RPFCG5XN_NT60XE
            https://rpfcg5xn-4ahqze.hf.space/health|TOKEN_RPFCG5XN_4AHQZE
            https://vd2eyqev-44uyps.hf.space/health|TOKEN_VD2EYQEV_44UYPS
            https://vd2eyqev-46qbcs.hf.space/health|TOKEN_VD2EYQEV_46QBCS
            https://vd2eyqev-8ml5ca.hf.space/health|TOKEN_VD2EYQEV_8ML5CA
            https://vd2eyqev-02grzj.hf.space/health|TOKEN_VD2EYQEV_02GRZJ
            https://vd2eyqev-wnsi2i.hf.space/health|TOKEN_VD2EYQEV_WNSI2I
            https://hasibxx2x-fqy2gs.hf.space/health|TOKEN_HASIBXX2X_FQY2GS
            https://hasibxx2x-islok9.hf.space/health|TOKEN_HASIBXX2X_ISLOK9
            https://hasibxx2x-ui26xr.hf.space/health|TOKEN_HASIBXX2X_UI26XR
            https://hasibxx2x-j5nx7q.hf.space/health|TOKEN_HASIBXX2X_J5NX7Q
            https://hasibxx2x-abjrjt.hf.space/health|TOKEN_HASIBXX2X_ABJRJT
            https://bdfbefbh-nem2er.hf.space/health|TOKEN_BDFBEFBH_NEM2ER
            https://bdfbefbh-dlz09f.hf.space/health|TOKEN_BDFBEFBH_DLZ09F
            https://bdfbefbh-dwyoo2.hf.space/health|TOKEN_BDFBEFBH_DWYOO2
            https://bdfbefbh-td2nna.hf.space/health|TOKEN_BDFBEFBH_TD2NNA
            https://bdfbefbh-o7gzbp.hf.space/health|TOKEN_BDFBEFBH_O7GZBP
            https://muhammadshahalamsheikh-cr2gsm.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_CR2GSM
            https://muhammadshahalamsheikh-prjgm2.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_PRJGM2
            https://muhammadshahalamsheikh-sluygu.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_SLUYGU
            https://muhammadshahalamsheikh-d7499m.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_D7499M
            https://muhammadshahalamsheikh-ubur8h.hf.space/health|TOKEN_MUHAMMADSHAHALAMSHEIKH_UBUR8H
            https://htyjy6-jq7pnb.hf.space/health|TOKEN_HTYJY6_JQ7PNB
            https://htyjy6-jnowvi.hf.space/health|TOKEN_HTYJY6_JNOWVI
            https://htyjy6-va5qvh.hf.space/health|TOKEN_HTYJY6_VA5QVH
            https://htyjy6-doez38.hf.space/health|TOKEN_HTYJY6_DOEZ38
            https://htyjy6-f3crbc.hf.space/health|TOKEN_HTYJY6_F3CRBC
          
          # URL List for POST Checks (Gemini Cookies)
          POST_URLS: >
            https://mflrj8fo-u3yi1k.hf.space/cookies|TOKEN_MFLRJ8FO_U3YI1K|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://mflrj8fo-r0py2x.hf.space/cookies|TOKEN_MFLRJ8FO_R0PY2X|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://mflrj8fo-qv3v2t.hf.space/cookies|TOKEN_MFLRJ8FO_QV3V2T|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://mflrj8fo-ngo6sj.hf.space/cookies|TOKEN_MFLRJ8FO_NGO6SJ|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://mflrj8fo-nteprv.hf.space/cookies|TOKEN_MFLRJ8FO_NTEPRV|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://84q1hgye-bflfl7.hf.space/cookies|TOKEN_84Q1HGYE_BFLFL7|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://84q1hgye-0mx2x4.hf.space/cookies|TOKEN_84Q1HGYE_0MX2X4|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://84q1hgye-ga9adj.hf.space/cookies|TOKEN_84Q1HGYE_GA9ADJ|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://84q1hgye-7klfui.hf.space/cookies|TOKEN_84Q1HGYE_7KLFUI|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://84q1hgye-9yj6mp.hf.space/cookies|TOKEN_84Q1HGYE_9YJ6MP|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://bwx2linr-xihbn0.hf.space/cookies|TOKEN_BWX2LINR_XIHBN0|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://bwx2linr-ls1gft.hf.space/cookies|TOKEN_BWX2LINR_LS1GFT|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://bwx2linr-b7ow00.hf.space/cookies|TOKEN_BWX2LINR_B7OW00|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://bwx2linr-kcayo8.hf.space/cookies|TOKEN_BWX2LINR_KCAYO8|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
            https://bwx2linr-419zhv.hf.space/cookies|TOKEN_BWX2LINR_419ZHV|{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}
        
        run: |
          get_token() {
            var_name=$1
            echo "${!var_name}"
          }

          echo "üöÄ Starting Parallel GET Checks (Max 20 concurrently)..."
          
          process_get() {
            entry=$1
            if [ -z "$entry" ]; then return; fi
            
            url="${entry%|*}"
            token_var="${entry#*|}"

            if [ "$token_var" == "NONE" ]; then
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 "$url")
            else
              token=$(get_token "$token_var")
              STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 20 -H "Authorization: Bearer $token" "$url")
            fi
            
            if [[ "$STATUS" =~ ^(200|405|401)$ ]]; then
               echo "‚úÖ GET OK ($STATUS): $url"
            else
               echo "‚ùå GET FAIL ($STATUS): $url"
            fi
          }

          export -f process_get
          export -f get_token
          
          MAX_PARALLEL=20
          
          for entry in $URLS; do
            process_get "$entry" &
            while [ "$(jobs -r | wc -l)" -ge "$MAX_PARALLEL" ]; do
                wait -n
            done
          done
          wait

          # ------------------------------------------------------------
          
          echo -e "\nüöÄ Starting STRICTLY SERIAL Cookies Checks..."
          
          process_post() {
            entry=$1
            if [ -z "$entry" ]; then return; fi
            
            url=$(echo "$entry" | cut -d'|' -f1)
            token_var=$(echo "$entry" | cut -d'|' -f2)
            payload='{}' 

            token=$(get_token "$token_var")
            
            # Use 55s timeout (longer than Space execution logic) to avoid 28
            # BUT: HF Spaces free tier sleeps containers.
            RESP=$(curl -s -S -w "\n%{http_code}" -X POST -H "Content-Type: application/json" \
                 -H "Authorization: Bearer $token" \
                 -d "$payload" --max-time 55 "$url" 2>&1)
            
            STATUS=$(echo "$RESP" | tail -n 1)
            BODY=$(echo "$RESP" | head -n -1)

            if [ "$STATUS" -eq 200 ]; then
               echo "‚úÖ COOKIE OK (200): $url"
               echo "   Result: $BODY"
            else
               echo "‚ùå COOKIE FAIL ($STATUS): $url"
               echo "   Reason: ${BODY:0:300}..."
            fi
          }
          
          # NO & backgrounding. Plain standard loop.
          if [ -n "$POST_URLS" ]; then
              for entry in $POST_URLS; do
                process_post "$entry"
              done
          fi
          
          # ------------------------------------------------------------
          # SINGLE RANDOM GENERATION CALL
          # ------------------------------------------------------------
          echo -e "\nüé≤ Selecting ONE Random Gemini Space for Full Generation..."
          
          GEMINI_CANDIDATES=("https://mflrj8fo-u3yi1k.hf.space/generate|TOKEN_MFLRJ8FO_U3YI1K" "https://mflrj8fo-r0py2x.hf.space/generate|TOKEN_MFLRJ8FO_R0PY2X" "https://mflrj8fo-qv3v2t.hf.space/generate|TOKEN_MFLRJ8FO_QV3V2T" "https://mflrj8fo-ngo6sj.hf.space/generate|TOKEN_MFLRJ8FO_NGO6SJ" "https://mflrj8fo-nteprv.hf.space/generate|TOKEN_MFLRJ8FO_NTEPRV" "https://84q1hgye-bflfl7.hf.space/generate|TOKEN_84Q1HGYE_BFLFL7" "https://84q1hgye-0mx2x4.hf.space/generate|TOKEN_84Q1HGYE_0MX2X4" "https://84q1hgye-ga9adj.hf.space/generate|TOKEN_84Q1HGYE_GA9ADJ" "https://84q1hgye-7klfui.hf.space/generate|TOKEN_84Q1HGYE_7KLFUI" "https://84q1hgye-9yj6mp.hf.space/generate|TOKEN_84Q1HGYE_9YJ6MP" "https://bwx2linr-xihbn0.hf.space/generate|TOKEN_BWX2LINR_XIHBN0" "https://bwx2linr-ls1gft.hf.space/generate|TOKEN_BWX2LINR_LS1GFT" "https://bwx2linr-b7ow00.hf.space/generate|TOKEN_BWX2LINR_B7OW00" "https://bwx2linr-kcayo8.hf.space/generate|TOKEN_BWX2LINR_KCAYO8" "https://bwx2linr-419zhv.hf.space/generate|TOKEN_BWX2LINR_419ZHV")
          
          if [ ${#GEMINI_CANDIDATES[@]} -gt 0 ]; then
             # Pick random index
             RAND_INDEX=$(( RANDOM % ${#GEMINI_CANDIDATES[@]} ))
             SELECTED="${GEMINI_CANDIDATES[$RAND_INDEX]}"
             
             url="${SELECTED%|*}"
             token_var="${SELECTED#*|}"
             token=$(get_token "$token_var")
             
             echo "üéØ Selected: $url"
             
             # Call /generate with payload
             payload='{"user_prompt":"hi","system_prompt":"keep-alive","config":"auto"}'
             
             RESP=$(curl -s -w "\n%{http_code}" -X POST -H "Content-Type: application/json" \
                 -H "Authorization: Bearer $token" \
                 -d "$payload" --max-time 60 "$url")
                 
             STATUS=$(echo "$RESP" | tail -n 1)
             BODY=$(echo "$RESP" | head -n -1)
             
             if [ "$STATUS" -eq 200 ]; then
               echo "‚úÖ GEN SUCCESS (200):"
               echo "$BODY"
             else
               echo "‚ùå GEN FAILED ($STATUS):"
               echo "$BODY"
             fi
          else
             echo "‚ö†Ô∏è No Gemini spaces found."
          fi
          
          echo -e "\n‚ú® Keep Alive Complete."
